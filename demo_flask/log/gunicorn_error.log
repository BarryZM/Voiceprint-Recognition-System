[2022-06-22 07:45:06 +0800] [3774809] [INFO] Starting gunicorn 20.1.0
[2022-06-22 07:45:06 +0800] [3774809] [INFO] Listening at: http://0.0.0.0:8180 (3774809)
[2022-06-22 07:45:06 +0800] [3774809] [INFO] Using worker: gevent
[2022-06-22 07:45:06 +0800] [3774811] [INFO] Booting worker with pid: 3774811
[2022-06-22 07:45:06 +0800] [3774812] [INFO] Booting worker with pid: 3774812
[2022-06-22 07:45:06 +0800] [3774819] [INFO] Booting worker with pid: 3774819
[2022-06-22 07:45:07 +0800] [3774820] [INFO] Booting worker with pid: 3774820
[2022-06-22 07:45:23,176] ERROR in app: Exception on /register/url [POST]
Traceback (most recent call last):
  File "/home/lyxx/.local/lib/python3.8/site-packages/flask/app.py", line 2077, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/lyxx/.local/lib/python3.8/site-packages/flask/app.py", line 1525, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/local/lib/python3.8/dist-packages/flask_cors/extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/home/lyxx/.local/lib/python3.8/site-packages/flask/app.py", line 1523, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/lyxx/.local/lib/python3.8/site-packages/flask/app.py", line 1509, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "/VAF-System/demo_flask/vvs_service.py", line 212, in register
    filepath = save_wav_from_url(url=new_url,spk=new_spkid,receive_path=cfg.RAW_FILE_PATH)
  File "/VAF-System/demo_flask/utils/save.py", line 69, in save_wav_from_url
    wget.download(url, save_path)
  File "/home/lyxx/.local/lib/python3.8/site-packages/wget.py", line 506, in download
    (fd, tmpfile) = tempfile.mkstemp(".tmp", prefix=prefix, dir=".")
  File "/usr/lib/python3.8/tempfile.py", line 470, in mkstemp
    return _mkstemp_inner(dir, prefix, suffix, flags, output_type)
  File "/usr/lib/python3.8/tempfile.py", line 389, in _mkstemp_inner
    fd = _os.open(file, flags, 0o600)
PermissionError: [Errno 13] Permission denied: '/tmp/13120360888/raw_2_3774811.wav_p00f848.tmp'
[2022-06-22 07:45:33,199] ERROR in app: Exception on /register/url [POST]
Traceback (most recent call last):
  File "/home/lyxx/.local/lib/python3.8/site-packages/flask/app.py", line 2077, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/lyxx/.local/lib/python3.8/site-packages/flask/app.py", line 1525, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/local/lib/python3.8/dist-packages/flask_cors/extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/home/lyxx/.local/lib/python3.8/site-packages/flask/app.py", line 1523, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/lyxx/.local/lib/python3.8/site-packages/flask/app.py", line 1509, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "/VAF-System/demo_flask/vvs_service.py", line 212, in register
    filepath = save_wav_from_url(url=new_url,spk=new_spkid,receive_path=cfg.RAW_FILE_PATH)
  File "/VAF-System/demo_flask/utils/save.py", line 69, in save_wav_from_url
    wget.download(url, save_path)
  File "/home/lyxx/.local/lib/python3.8/site-packages/wget.py", line 506, in download
    (fd, tmpfile) = tempfile.mkstemp(".tmp", prefix=prefix, dir=".")
  File "/usr/lib/python3.8/tempfile.py", line 470, in mkstemp
    return _mkstemp_inner(dir, prefix, suffix, flags, output_type)
  File "/usr/lib/python3.8/tempfile.py", line 389, in _mkstemp_inner
    fd = _os.open(file, flags, 0o600)
PermissionError: [Errno 13] Permission denied: '/tmp/15725140803/raw_4_3774819.wavddo3f0r8.tmp'
[2022-06-22 07:45:39 +0800] [3776143] [INFO] Starting gunicorn 20.1.0
[2022-06-22 07:45:39 +0800] [3776143] [INFO] Listening at: http://0.0.0.0:8180 (3776143)
[2022-06-22 07:45:39 +0800] [3776143] [INFO] Using worker: gevent
[2022-06-22 07:45:39 +0800] [3776165] [INFO] Booting worker with pid: 3776165
[2022-06-22 07:45:39 +0800] [3776176] [INFO] Booting worker with pid: 3776176
[2022-06-22 07:45:39 +0800] [3776177] [INFO] Booting worker with pid: 3776177
[2022-06-22 07:45:39 +0800] [3776197] [INFO] Booting worker with pid: 3776197
[2022-06-22 07:47:12,823] ERROR in app: Exception on /register/url [POST]
Traceback (most recent call last):
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 2077, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1525, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/local/lib/python3.8/dist-packages/flask_cors/extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1523, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1509, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "/VAF-System/demo_flask/vvs_service.py", line 312, in register
    add_hit_log(hit_info,hit_db,Hit)
  File "/VAF-System/demo_flask/utils/orm.py", line 100, in add_hit_log
    info.span_time =  int(hit_info["call_endtime"].total_seconds() - hit_info["call_begintime"].total_seconds())
AttributeError: 'str' object has no attribute 'total_seconds'
[2022-06-22 07:51:30 +0800] [3788110] [INFO] Starting gunicorn 20.1.0
[2022-06-22 07:51:30 +0800] [3788110] [INFO] Listening at: http://0.0.0.0:8180 (3788110)
[2022-06-22 07:51:30 +0800] [3788110] [INFO] Using worker: gevent
[2022-06-22 07:51:30 +0800] [3788113] [INFO] Booting worker with pid: 3788113
[2022-06-22 07:51:30 +0800] [3788114] [INFO] Booting worker with pid: 3788114
[2022-06-22 07:51:30 +0800] [3788115] [INFO] Booting worker with pid: 3788115
[2022-06-22 07:51:30 +0800] [3788144] [INFO] Booting worker with pid: 3788144
[2022-06-22 07:52:44,816] ERROR in app: Exception on /register/url [POST]
Traceback (most recent call last):
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 2077, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1525, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/local/lib/python3.8/dist-packages/flask_cors/extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1523, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1509, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "/VAF-System/demo_flask/vvs_service.py", line 312, in register
    add_hit_log(hit_info,hit_db,Hit)
  File "/VAF-System/demo_flask/utils/orm.py", line 100, in add_hit_log
    info.span_time =  int(time.strptime(hit_info["call_endtime"],"%Y-%m-%d %H:%M:%S").total_seconds() - time.strptime(hit_info["call_begintime"],"%Y-%m-%d %H:%M:%S").total_seconds())
AttributeError: 'time.struct_time' object has no attribute 'total_seconds'
[2022-06-22 07:55:05 +0800] [3795574] [INFO] Starting gunicorn 20.1.0
[2022-06-22 07:55:05 +0800] [3795574] [INFO] Listening at: http://0.0.0.0:8180 (3795574)
[2022-06-22 07:55:05 +0800] [3795574] [INFO] Using worker: gevent
[2022-06-22 07:55:05 +0800] [3795576] [INFO] Booting worker with pid: 3795576
[2022-06-22 07:55:05 +0800] [3795577] [INFO] Booting worker with pid: 3795577
[2022-06-22 07:55:05 +0800] [3795578] [INFO] Booting worker with pid: 3795578
[2022-06-22 07:55:05 +0800] [3795579] [INFO] Booting worker with pid: 3795579
[2022-06-22 07:56:08,649] ERROR in app: Exception on /register/url [POST]
Traceback (most recent call last):
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 2077, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1525, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/local/lib/python3.8/dist-packages/flask_cors/extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1523, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1509, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "/VAF-System/demo_flask/vvs_service.py", line 378, in register
    add_speaker(skp_info,speaker_db,Speaker)
  File "/VAF-System/demo_flask/utils/orm.py", line 132, in add_speaker
    info.span_time =  get_span(spk_info.call_endtime,spk_info.call_begintime)
AttributeError: 'dict' object has no attribute 'call_endtime'
[2022-06-22 07:57:17 +0800] [3800248] [INFO] Starting gunicorn 20.1.0
[2022-06-22 07:57:28 +0800] [3800693] [INFO] Starting gunicorn 20.1.0
[2022-06-22 07:57:28 +0800] [3800693] [INFO] Listening at: http://0.0.0.0:8180 (3800693)
[2022-06-22 07:57:28 +0800] [3800693] [INFO] Using worker: gevent
[2022-06-22 07:57:28 +0800] [3800696] [INFO] Booting worker with pid: 3800696
[2022-06-22 07:57:28 +0800] [3800697] [INFO] Booting worker with pid: 3800697
[2022-06-22 07:57:28 +0800] [3800698] [INFO] Booting worker with pid: 3800698
[2022-06-22 07:57:28 +0800] [3800699] [INFO] Booting worker with pid: 3800699
[2022-06-22 07:58:21,489] ERROR in app: Exception on /register/url [POST]
Traceback (most recent call last):
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/engine/base.py", line 1799, in _execute_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/engine/default.py", line 717, in do_execute
    cursor.execute(statement, parameters)
  File "/usr/local/lib/python3.8/dist-packages/MySQLdb/cursors.py", line 206, in execute
    res = self._query(query)
  File "/usr/local/lib/python3.8/dist-packages/MySQLdb/cursors.py", line 319, in _query
    db.query(q)
  File "/usr/local/lib/python3.8/dist-packages/MySQLdb/connections.py", line 254, in query
    _mysql.connection.query(self, query)
MySQLdb._exceptions.OperationalError: (1048, "Column 'province' cannot be null")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 2077, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1525, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/local/lib/python3.8/dist-packages/flask_cors/extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1523, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1509, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "/VAF-System/demo_flask/vvs_service.py", line 378, in register
    add_speaker(skp_info,speaker_db,Speaker)
  File "/VAF-System/demo_flask/utils/orm.py", line 134, in add_speaker
    db.session.commit()
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/session.py", line 1428, in commit
    self._transaction.commit(_to_root=self.future)
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/session.py", line 829, in commit
    self._prepare_impl()
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/session.py", line 808, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/session.py", line 3340, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/session.py", line 3480, in _flush
    transaction.rollback(_capture_exception=True)
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/session.py", line 3440, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/unitofwork.py", line 456, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/unitofwork.py", line 630, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/persistence.py", line 244, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/persistence.py", line 1221, in _emit_insert_statements
    result = connection._execute_20(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/engine/base.py", line 1611, in _execute_20
    return meth(self, args_10style, kwargs_10style, execution_options)
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/sql/elements.py", line 325, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/engine/base.py", line 1478, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/engine/base.py", line 2023, in _handle_dbapi_exception
    util.raise_(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/engine/base.py", line 1799, in _execute_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/engine/default.py", line 717, in do_execute
    cursor.execute(statement, parameters)
  File "/usr/local/lib/python3.8/dist-packages/MySQLdb/cursors.py", line 206, in execute
    res = self._query(query)
  File "/usr/local/lib/python3.8/dist-packages/MySQLdb/cursors.py", line 319, in _query
    db.query(q)
  File "/usr/local/lib/python3.8/dist-packages/MySQLdb/connections.py", line 254, in query
    _mysql.connection.query(self, query)
sqlalchemy.exc.OperationalError: (MySQLdb._exceptions.OperationalError) (1048, "Column 'province' cannot be null")
[SQL: INSERT INTO speaker (name, file_url, phone, register_time, province, city, phone_type, area_code, zip_code, self_test_score_mean, self_test_score_min, self_test_score_max, call_begintime, call_endtime, span_time, `status`, class_number, hit_count, input_reason, delete_reason) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)]
[parameters: ('none', 'http://116.62.120.233/mpccApi/common/downloadFile.json?type=0&addr=/FsPbx/CTI/DATA/1/recoredings/2022-06-21/cti_record_11002_1655803746682629_1-e68651e1-bd52-43be-9d97-292c9f013a81.wav', '13120360888', datetime.datetime(2022, 6, 22, 7, 58, 21, 453176), None, None, None, None, None, array(0.93319046, dtype=float32), array(0.93319046, dtype=float32), array(0.93319046, dtype=float32), '2022-06-21 17:29:06', '2022-06-21 17:35:38', 392, 1, 15, 0, 0, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
[2022-06-22 08:00:16 +0800] [3806568] [INFO] Starting gunicorn 20.1.0
[2022-06-22 08:00:18,097] ERROR in app: Exception on /register/url [POST]
Traceback (most recent call last):
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/engine/base.py", line 1799, in _execute_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/engine/default.py", line 717, in do_execute
    cursor.execute(statement, parameters)
  File "/usr/local/lib/python3.8/dist-packages/MySQLdb/cursors.py", line 206, in execute
    res = self._query(query)
  File "/usr/local/lib/python3.8/dist-packages/MySQLdb/cursors.py", line 319, in _query
    db.query(q)
  File "/usr/local/lib/python3.8/dist-packages/MySQLdb/connections.py", line 254, in query
    _mysql.connection.query(self, query)
MySQLdb._exceptions.OperationalError: (1048, "Column 'province' cannot be null")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 2077, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1525, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/local/lib/python3.8/dist-packages/flask_cors/extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1523, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1509, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "/VAF-System/demo_flask/vvs_service.py", line 378, in register
    add_speaker(skp_info,speaker_db,Speaker)
  File "/VAF-System/demo_flask/utils/orm.py", line 134, in add_speaker
    db.session.commit()
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/session.py", line 1428, in commit
    self._transaction.commit(_to_root=self.future)
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/session.py", line 829, in commit
    self._prepare_impl()
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/session.py", line 808, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/session.py", line 3340, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/session.py", line 3480, in _flush
    transaction.rollback(_capture_exception=True)
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/session.py", line 3440, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/unitofwork.py", line 456, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/unitofwork.py", line 630, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/persistence.py", line 244, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/persistence.py", line 1221, in _emit_insert_statements
    result = connection._execute_20(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/engine/base.py", line 1611, in _execute_20
    return meth(self, args_10style, kwargs_10style, execution_options)
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/sql/elements.py", line 325, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/engine/base.py", line 1478, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/engine/base.py", line 2023, in _handle_dbapi_exception
    util.raise_(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/engine/base.py", line 1799, in _execute_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/engine/default.py", line 717, in do_execute
    cursor.execute(statement, parameters)
  File "/usr/local/lib/python3.8/dist-packages/MySQLdb/cursors.py", line 206, in execute
    res = self._query(query)
  File "/usr/local/lib/python3.8/dist-packages/MySQLdb/cursors.py", line 319, in _query
    db.query(q)
  File "/usr/local/lib/python3.8/dist-packages/MySQLdb/connections.py", line 254, in query
    _mysql.connection.query(self, query)
sqlalchemy.exc.OperationalError: (MySQLdb._exceptions.OperationalError) (1048, "Column 'province' cannot be null")
[SQL: INSERT INTO speaker (name, file_url, phone, register_time, province, city, phone_type, area_code, zip_code, self_test_score_mean, self_test_score_min, self_test_score_max, call_begintime, call_endtime, span_time, `status`, class_number, hit_count, input_reason, delete_reason) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)]
[parameters: ('none', 'http://116.62.120.233/mpccApi/common/downloadFile.json?type=0&addr=/FsPbx/CTI/DATA/1/recoredings/2022-06-21/cti_record_11007_1655802999159690_1-7ad3c6e5-f547-4b4b-b763-c21d015383e8.wav', '13872974381', datetime.datetime(2022, 6, 22, 8, 0, 18, 56542), None, None, None, None, None, array(0.8381152, dtype=float32), array(0.8381152, dtype=float32), array(0.8381152, dtype=float32), '2022-06-21 17:16:39', '2022-06-21 17:20:41', 242, 1, 72, 0, 0, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
[2022-06-22 08:01:08,506] ERROR in app: Exception on /register/url [POST]
Traceback (most recent call last):
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/engine/base.py", line 1799, in _execute_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/engine/default.py", line 717, in do_execute
    cursor.execute(statement, parameters)
  File "/usr/local/lib/python3.8/dist-packages/MySQLdb/cursors.py", line 206, in execute
    res = self._query(query)
  File "/usr/local/lib/python3.8/dist-packages/MySQLdb/cursors.py", line 319, in _query
    db.query(q)
  File "/usr/local/lib/python3.8/dist-packages/MySQLdb/connections.py", line 254, in query
    _mysql.connection.query(self, query)
MySQLdb._exceptions.OperationalError: (1048, "Column 'province' cannot be null")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 2077, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1525, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/local/lib/python3.8/dist-packages/flask_cors/extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1523, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1509, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "/VAF-System/demo_flask/vvs_service.py", line 378, in register
    add_speaker(skp_info,speaker_db,Speaker)
  File "/VAF-System/demo_flask/utils/orm.py", line 134, in add_speaker
    db.session.commit()
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/session.py", line 1428, in commit
    self._transaction.commit(_to_root=self.future)
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/session.py", line 829, in commit
    self._prepare_impl()
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/session.py", line 808, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/session.py", line 3340, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/session.py", line 3480, in _flush
    transaction.rollback(_capture_exception=True)
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/session.py", line 3440, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/unitofwork.py", line 456, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/unitofwork.py", line 630, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/persistence.py", line 244, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/persistence.py", line 1221, in _emit_insert_statements
    result = connection._execute_20(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/engine/base.py", line 1611, in _execute_20
    return meth(self, args_10style, kwargs_10style, execution_options)
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/sql/elements.py", line 325, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/engine/base.py", line 1478, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/engine/base.py", line 2023, in _handle_dbapi_exception
    util.raise_(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/engine/base.py", line 1799, in _execute_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/engine/default.py", line 717, in do_execute
    cursor.execute(statement, parameters)
  File "/usr/local/lib/python3.8/dist-packages/MySQLdb/cursors.py", line 206, in execute
    res = self._query(query)
  File "/usr/local/lib/python3.8/dist-packages/MySQLdb/cursors.py", line 319, in _query
    db.query(q)
  File "/usr/local/lib/python3.8/dist-packages/MySQLdb/connections.py", line 254, in query
    _mysql.connection.query(self, query)
sqlalchemy.exc.OperationalError: (MySQLdb._exceptions.OperationalError) (1048, "Column 'province' cannot be null")
[SQL: INSERT INTO speaker (name, file_url, phone, register_time, province, city, phone_type, area_code, zip_code, self_test_score_mean, self_test_score_min, self_test_score_max, call_begintime, call_endtime, span_time, `status`, class_number, hit_count, input_reason, delete_reason) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)]
[parameters: ('none', 'http://116.62.120.233/mpccApi/common/downloadFile.json?type=0&addr=/FsPbx/CTI/DATA/1/recoredings/2022-06-21/cti_record_11002_1655803746682629_1-e68651e1-bd52-43be-9d97-292c9f013a81.wav', '13120360888', datetime.datetime(2022, 6, 22, 8, 1, 8, 473795), None, None, None, None, None, array(0.93319046, dtype=float32), array(0.93319046, dtype=float32), array(0.93319046, dtype=float32), '2022-06-21 17:29:06', '2022-06-21 17:35:38', 392, 1, 15, 0, 0, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
[2022-06-22 08:03:04,242] ERROR in app: Exception on /register/url [POST]
Traceback (most recent call last):
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/engine/base.py", line 1799, in _execute_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/engine/default.py", line 717, in do_execute
    cursor.execute(statement, parameters)
  File "/usr/local/lib/python3.8/dist-packages/MySQLdb/cursors.py", line 206, in execute
    res = self._query(query)
  File "/usr/local/lib/python3.8/dist-packages/MySQLdb/cursors.py", line 319, in _query
    db.query(q)
  File "/usr/local/lib/python3.8/dist-packages/MySQLdb/connections.py", line 254, in query
    _mysql.connection.query(self, query)
MySQLdb._exceptions.OperationalError: (1048, "Column 'province' cannot be null")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 2077, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1525, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/local/lib/python3.8/dist-packages/flask_cors/extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1523, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1509, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "/VAF-System/demo_flask/vvs_service.py", line 378, in register
    add_speaker(skp_info,speaker_db,Speaker)
  File "/VAF-System/demo_flask/utils/orm.py", line 134, in add_speaker
    db.session.commit()
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/session.py", line 1428, in commit
    self._transaction.commit(_to_root=self.future)
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/session.py", line 829, in commit
    self._prepare_impl()
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/session.py", line 808, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/session.py", line 3340, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/session.py", line 3480, in _flush
    transaction.rollback(_capture_exception=True)
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/session.py", line 3440, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/unitofwork.py", line 456, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/unitofwork.py", line 630, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/persistence.py", line 244, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/persistence.py", line 1221, in _emit_insert_statements
    result = connection._execute_20(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/engine/base.py", line 1611, in _execute_20
    return meth(self, args_10style, kwargs_10style, execution_options)
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/sql/elements.py", line 325, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/engine/base.py", line 1478, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/engine/base.py", line 2023, in _handle_dbapi_exception
    util.raise_(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/engine/base.py", line 1799, in _execute_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/engine/default.py", line 717, in do_execute
    cursor.execute(statement, parameters)
  File "/usr/local/lib/python3.8/dist-packages/MySQLdb/cursors.py", line 206, in execute
    res = self._query(query)
  File "/usr/local/lib/python3.8/dist-packages/MySQLdb/cursors.py", line 319, in _query
    db.query(q)
  File "/usr/local/lib/python3.8/dist-packages/MySQLdb/connections.py", line 254, in query
    _mysql.connection.query(self, query)
sqlalchemy.exc.OperationalError: (MySQLdb._exceptions.OperationalError) (1048, "Column 'province' cannot be null")
[SQL: INSERT INTO speaker (name, file_url, phone, register_time, province, city, phone_type, area_code, zip_code, self_test_score_mean, self_test_score_min, self_test_score_max, call_begintime, call_endtime, span_time, `status`, class_number, hit_count, input_reason, delete_reason) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)]
[parameters: ('none', 'http://116.62.120.233/mpccApi/common/downloadFile.json?type=0&addr=/FsPbx/CTI/DATA/1/recoredings/2022-06-21/cti_record_11007_1655802999159690_1-7ad3c6e5-f547-4b4b-b763-c21d015383e8.wav', '13872974381', datetime.datetime(2022, 6, 22, 8, 3, 4, 207487), None, None, None, None, None, array(0.8381152, dtype=float32), array(0.8381152, dtype=float32), array(0.8381152, dtype=float32), '2022-06-21 17:16:39', '2022-06-21 17:20:41', 242, 1, 72, 0, 0, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
[2022-06-22 08:03:35,045] ERROR in app: Exception on /register/url [POST]
Traceback (most recent call last):
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/engine/base.py", line 1799, in _execute_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/engine/default.py", line 717, in do_execute
    cursor.execute(statement, parameters)
  File "/usr/local/lib/python3.8/dist-packages/MySQLdb/cursors.py", line 206, in execute
    res = self._query(query)
  File "/usr/local/lib/python3.8/dist-packages/MySQLdb/cursors.py", line 319, in _query
    db.query(q)
  File "/usr/local/lib/python3.8/dist-packages/MySQLdb/connections.py", line 254, in query
    _mysql.connection.query(self, query)
MySQLdb._exceptions.OperationalError: (1048, "Column 'province' cannot be null")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 2077, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1525, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/local/lib/python3.8/dist-packages/flask_cors/extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1523, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1509, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "/VAF-System/demo_flask/vvs_service.py", line 378, in register
    add_speaker(skp_info,speaker_db,Speaker)
  File "/VAF-System/demo_flask/utils/orm.py", line 134, in add_speaker
    db.session.commit()
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/session.py", line 1428, in commit
    self._transaction.commit(_to_root=self.future)
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/session.py", line 829, in commit
    self._prepare_impl()
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/session.py", line 808, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/session.py", line 3340, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/session.py", line 3480, in _flush
    transaction.rollback(_capture_exception=True)
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/util/langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/session.py", line 3440, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/unitofwork.py", line 456, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/unitofwork.py", line 630, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/persistence.py", line 244, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/orm/persistence.py", line 1221, in _emit_insert_statements
    result = connection._execute_20(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/engine/base.py", line 1611, in _execute_20
    return meth(self, args_10style, kwargs_10style, execution_options)
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/sql/elements.py", line 325, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/engine/base.py", line 1478, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/engine/base.py", line 2023, in _handle_dbapi_exception
    util.raise_(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/util/compat.py", line 207, in raise_
    raise exception
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/engine/base.py", line 1799, in _execute_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.8/dist-packages/sqlalchemy/engine/default.py", line 717, in do_execute
    cursor.execute(statement, parameters)
  File "/usr/local/lib/python3.8/dist-packages/MySQLdb/cursors.py", line 206, in execute
    res = self._query(query)
  File "/usr/local/lib/python3.8/dist-packages/MySQLdb/cursors.py", line 319, in _query
    db.query(q)
  File "/usr/local/lib/python3.8/dist-packages/MySQLdb/connections.py", line 254, in query
    _mysql.connection.query(self, query)
sqlalchemy.exc.OperationalError: (MySQLdb._exceptions.OperationalError) (1048, "Column 'province' cannot be null")
[SQL: INSERT INTO speaker (name, file_url, phone, register_time, province, city, phone_type, area_code, zip_code, self_test_score_mean, self_test_score_min, self_test_score_max, call_begintime, call_endtime, span_time, `status`, class_number, hit_count, input_reason, delete_reason) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)]
[parameters: ('none', 'http://116.62.120.233/mpccApi/common/downloadFile.json?type=0&addr=/FsPbx/CTI/DATA/1/recoredings/2022-06-21/cti_record_11003_1655803086802944_1-5274219b-5a60-4fab-affe-21e93db4a95f.wav', '19179574809', datetime.datetime(2022, 6, 22, 8, 3, 35, 16656), None, None, None, None, None, array(0.85461104, dtype=float32), array(0.85461104, dtype=float32), array(0.85461104, dtype=float32), '2022-06-21 17:18:06', '2022-06-21 17:20:38', 152, 1, 118, 0, 0, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)
[2022-06-22 08:05:10 +0800] [3816655] [INFO] Starting gunicorn 20.1.0
[2022-06-22 08:05:10 +0800] [3816655] [INFO] Listening at: http://0.0.0.0:8180 (3816655)
[2022-06-22 08:05:10 +0800] [3816655] [INFO] Using worker: gevent
[2022-06-22 08:05:10 +0800] [3816657] [INFO] Booting worker with pid: 3816657
[2022-06-22 08:05:10 +0800] [3816658] [INFO] Booting worker with pid: 3816658
[2022-06-22 08:05:10 +0800] [3816659] [INFO] Booting worker with pid: 3816659
[2022-06-22 08:05:10 +0800] [3816699] [INFO] Booting worker with pid: 3816699
[2022-06-22 08:07:26 +0800] [3821491] [INFO] Starting gunicorn 20.1.0
[2022-06-22 08:07:26 +0800] [3821491] [INFO] Listening at: http://0.0.0.0:8180 (3821491)
[2022-06-22 08:07:26 +0800] [3821491] [INFO] Using worker: gevent
[2022-06-22 08:07:26 +0800] [3821493] [INFO] Booting worker with pid: 3821493
[2022-06-22 08:07:26 +0800] [3821503] [INFO] Booting worker with pid: 3821503
[2022-06-22 08:07:27 +0800] [3821544] [INFO] Booting worker with pid: 3821544
[2022-06-22 08:07:27 +0800] [3821564] [INFO] Booting worker with pid: 3821564
[2022-06-22 09:53:24,292] ERROR in app: Exception on /register/url [POST]
Traceback (most recent call last):
  File "/usr/lib/python3.8/http/client.py", line 593, in _readinto_chunked
    n = self._safe_readinto(mvb)
  File "/usr/lib/python3.8/http/client.py", line 623, in _safe_readinto
    raise IncompleteRead(bytes(b[:n]), amt-n)
http.client.IncompleteRead: IncompleteRead(1071 bytes read, 7121 more expected)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 2077, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1525, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/local/lib/python3.8/dist-packages/flask_cors/extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1523, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1509, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "/VAF-System/demo_flask/vvs_service.py", line 212, in register
    filepath = save_wav_from_url(url=new_url,spk=new_spkid,receive_path=cfg.RAW_FILE_PATH)
  File "/VAF-System/demo_flask/utils/save.py", line 69, in save_wav_from_url
    wget.download(url, save_path)
  File "/usr/local/lib/python3.8/dist-packages/wget.py", line 526, in download
    (tmpfile, headers) = ulib.urlretrieve(binurl, tmpfile, callback)
  File "/usr/lib/python3.8/urllib/request.py", line 276, in urlretrieve
    block = fp.read(bs)
  File "/usr/lib/python3.8/http/client.py", line 459, in read
    n = self.readinto(b)
  File "/usr/lib/python3.8/http/client.py", line 493, in readinto
    return self._readinto_chunked(b)
  File "/usr/lib/python3.8/http/client.py", line 604, in _readinto_chunked
    raise IncompleteRead(bytes(b[0:total_bytes]))
http.client.IncompleteRead: IncompleteRead(0 bytes read)
[2022-06-22 10:18:40,492] ERROR in app: Exception on /register/url [POST]
Traceback (most recent call last):
  File "/usr/lib/python3.8/http/client.py", line 593, in _readinto_chunked
    n = self._safe_readinto(mvb)
  File "/usr/lib/python3.8/http/client.py", line 623, in _safe_readinto
    raise IncompleteRead(bytes(b[:n]), amt-n)
http.client.IncompleteRead: IncompleteRead(6927 bytes read, 1265 more expected)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 2077, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1525, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/local/lib/python3.8/dist-packages/flask_cors/extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1523, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1509, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "/VAF-System/demo_flask/vvs_service.py", line 212, in register
    filepath = save_wav_from_url(url=new_url,spk=new_spkid,receive_path=cfg.RAW_FILE_PATH)
  File "/VAF-System/demo_flask/utils/save.py", line 69, in save_wav_from_url
    wget.download(url, save_path)
  File "/usr/local/lib/python3.8/dist-packages/wget.py", line 526, in download
    (tmpfile, headers) = ulib.urlretrieve(binurl, tmpfile, callback)
  File "/usr/lib/python3.8/urllib/request.py", line 276, in urlretrieve
    block = fp.read(bs)
  File "/usr/lib/python3.8/http/client.py", line 459, in read
    n = self.readinto(b)
  File "/usr/lib/python3.8/http/client.py", line 493, in readinto
    return self._readinto_chunked(b)
  File "/usr/lib/python3.8/http/client.py", line 604, in _readinto_chunked
    raise IncompleteRead(bytes(b[0:total_bytes]))
http.client.IncompleteRead: IncompleteRead(0 bytes read)
[2022-06-22 11:26:12 +0800] [30565] [INFO] Starting gunicorn 20.1.0
[2022-06-22 11:26:12 +0800] [30565] [INFO] Listening at: http://0.0.0.0:8180 (30565)
[2022-06-22 11:26:12 +0800] [30565] [INFO] Using worker: gevent
[2022-06-22 11:26:12 +0800] [30573] [INFO] Booting worker with pid: 30573
[2022-06-22 11:26:12 +0800] [30574] [INFO] Booting worker with pid: 30574
[2022-06-22 11:26:12 +0800] [30575] [INFO] Booting worker with pid: 30575
[2022-06-22 11:26:12 +0800] [30595] [INFO] Booting worker with pid: 30595
[2022-06-22 11:39:40 +0800] [58599] [INFO] Starting gunicorn 20.1.0
[2022-06-22 11:39:40 +0800] [58599] [INFO] Listening at: http://0.0.0.0:8180 (58599)
[2022-06-22 11:39:40 +0800] [58599] [INFO] Using worker: gevent
[2022-06-22 11:39:40 +0800] [58601] [INFO] Booting worker with pid: 58601
[2022-06-22 11:39:40 +0800] [58602] [INFO] Booting worker with pid: 58602
[2022-06-22 11:39:40 +0800] [58622] [INFO] Booting worker with pid: 58622
[2022-06-22 11:39:40 +0800] [58623] [INFO] Booting worker with pid: 58623
[2022-06-22 11:41:11 +0800] [62029] [INFO] Starting gunicorn 20.1.0
[2022-06-22 11:41:11 +0800] [62029] [INFO] Listening at: http://0.0.0.0:8180 (62029)
[2022-06-22 11:41:11 +0800] [62029] [INFO] Using worker: gevent
[2022-06-22 11:41:11 +0800] [62031] [INFO] Booting worker with pid: 62031
[2022-06-22 11:41:11 +0800] [62032] [INFO] Booting worker with pid: 62032
[2022-06-22 11:41:11 +0800] [62033] [INFO] Booting worker with pid: 62033
[2022-06-22 11:41:11 +0800] [62053] [INFO] Booting worker with pid: 62053
[2022-06-22 13:13:00,019] ERROR in app: Exception on /register/url [POST]
Traceback (most recent call last):
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 2077, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1525, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/local/lib/python3.8/dist-packages/flask_cors/extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1523, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1509, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "/VAF-System/demo_flask/vvs_service.py", line 378, in register
    add_speaker(skp_info,speaker_db,Speaker)
  File "/VAF-System/demo_flask/utils/orm.py", line 132, in add_speaker
    info.span_time =  get_span(info.call_endtime,info.call_begintime)
  File "/VAF-System/demo_flask/utils/orm.py", line 85, in get_span
    time2 = time.strptime(time2,"%Y-%m-%d %H:%M:%S")
  File "/usr/lib/python3.8/_strptime.py", line 562, in _strptime_time
    tt = _strptime(data_string, format)[0]
  File "/usr/lib/python3.8/_strptime.py", line 349, in _strptime
    raise ValueError("time data %r does not match format %r" %
ValueError: time data '0000-00-00 00:00:00' does not match format '%Y-%m-%d %H:%M:%S'
[2022-06-22 13:47:48 +0800] [318293] [INFO] Starting gunicorn 20.1.0
[2022-06-22 13:47:48 +0800] [318293] [INFO] Listening at: http://0.0.0.0:8180 (318293)
[2022-06-22 13:47:48 +0800] [318293] [INFO] Using worker: gevent
[2022-06-22 13:47:48 +0800] [318295] [INFO] Booting worker with pid: 318295
[2022-06-22 13:47:48 +0800] [318296] [INFO] Booting worker with pid: 318296
[2022-06-22 13:47:48 +0800] [318316] [INFO] Booting worker with pid: 318316
[2022-06-22 13:47:48 +0800] [318326] [INFO] Booting worker with pid: 318326
[2022-06-22 13:48:18,743] ERROR in app: Exception on /hit_info_ws [GET]
Traceback (most recent call last):
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 2077, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1525, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/local/lib/python3.8/dist-packages/flask_cors/extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1523, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1509, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "/usr/local/lib/python3.8/dist-packages/flask_sock/__init__.py", line 59, in websocket_route
    f(ws, *args, **kwargs)
  File "/VAF-System/demo_flask/vvs_service.py", line 399, in hit_info_ws
    sock.send(query_hit_location())
  File "/VAF-System/demo_flask/utils/query.py", line 152, in query_hit_location
    cur.execute(query_sql)
  File "/usr/local/lib/python3.8/dist-packages/pymysql/cursors.py", line 148, in execute
    result = self._query(query)
  File "/usr/local/lib/python3.8/dist-packages/pymysql/cursors.py", line 310, in _query
    conn.query(q)
  File "/usr/local/lib/python3.8/dist-packages/pymysql/connections.py", line 548, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/usr/local/lib/python3.8/dist-packages/pymysql/connections.py", line 775, in _read_query_result
    result.read()
  File "/usr/local/lib/python3.8/dist-packages/pymysql/connections.py", line 1156, in read
    first_packet = self.connection._read_packet()
  File "/usr/local/lib/python3.8/dist-packages/pymysql/connections.py", line 725, in _read_packet
    packet.raise_for_error()
  File "/usr/local/lib/python3.8/dist-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/usr/local/lib/python3.8/dist-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.ProgrammingError: (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'AND phone IS NOT NULL GROUP BY province ORDER BY count DESC LIMIT 10' at line 1")
[2022-06-22 13:48:45,657] ERROR in app: Exception on /hit_info_ws [GET]
Traceback (most recent call last):
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 2077, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1525, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/local/lib/python3.8/dist-packages/flask_cors/extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1523, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1509, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "/usr/local/lib/python3.8/dist-packages/flask_sock/__init__.py", line 59, in websocket_route
    f(ws, *args, **kwargs)
  File "/VAF-System/demo_flask/vvs_service.py", line 399, in hit_info_ws
    sock.send(query_hit_location())
  File "/VAF-System/demo_flask/utils/query.py", line 152, in query_hit_location
    cur.execute(query_sql)
  File "/usr/local/lib/python3.8/dist-packages/pymysql/cursors.py", line 148, in execute
    result = self._query(query)
  File "/usr/local/lib/python3.8/dist-packages/pymysql/cursors.py", line 310, in _query
    conn.query(q)
  File "/usr/local/lib/python3.8/dist-packages/pymysql/connections.py", line 548, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/usr/local/lib/python3.8/dist-packages/pymysql/connections.py", line 775, in _read_query_result
    result.read()
  File "/usr/local/lib/python3.8/dist-packages/pymysql/connections.py", line 1156, in read
    first_packet = self.connection._read_packet()
  File "/usr/local/lib/python3.8/dist-packages/pymysql/connections.py", line 725, in _read_packet
    packet.raise_for_error()
  File "/usr/local/lib/python3.8/dist-packages/pymysql/protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/usr/local/lib/python3.8/dist-packages/pymysql/err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.ProgrammingError: (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'AND phone IS NOT NULL GROUP BY province ORDER BY count DESC LIMIT 10' at line 1")
[2022-06-22 13:50:27 +0800] [323776] [INFO] Starting gunicorn 20.1.0
[2022-06-22 13:50:27 +0800] [323776] [INFO] Listening at: http://0.0.0.0:8180 (323776)
[2022-06-22 13:50:27 +0800] [323776] [INFO] Using worker: gevent
[2022-06-22 13:50:27 +0800] [323778] [INFO] Booting worker with pid: 323778
[2022-06-22 13:50:27 +0800] [323779] [INFO] Booting worker with pid: 323779
[2022-06-22 13:50:27 +0800] [323780] [INFO] Booting worker with pid: 323780
[2022-06-22 13:50:27 +0800] [323800] [INFO] Booting worker with pid: 323800
[2022-06-22 14:31:43 +0800] [408080] [INFO] Starting gunicorn 20.1.0
[2022-06-22 14:31:43 +0800] [408080] [INFO] Listening at: http://0.0.0.0:8180 (408080)
[2022-06-22 14:31:43 +0800] [408080] [INFO] Using worker: gevent
[2022-06-22 14:31:43 +0800] [408082] [INFO] Booting worker with pid: 408082
[2022-06-22 14:31:43 +0800] [408083] [INFO] Booting worker with pid: 408083
[2022-06-22 14:31:43 +0800] [408084] [INFO] Booting worker with pid: 408084
[2022-06-22 14:31:43 +0800] [408085] [INFO] Booting worker with pid: 408085
[2022-06-22 14:37:43,159] ERROR in app: Exception on /register/url [POST]
Traceback (most recent call last):
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 2077, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1525, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/local/lib/python3.8/dist-packages/flask_cors/extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1523, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1509, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "/VAF-System/demo_flask/vvs_service.py", line 378, in register
    add_speaker(skp_info,speaker_db,Speaker)
  File "/VAF-System/demo_flask/utils/orm.py", line 132, in add_speaker
    info.span_time =  get_span(info.call_endtime,info.call_begintime)
  File "/VAF-System/demo_flask/utils/orm.py", line 85, in get_span
    time2 = time.strptime(time2,"%Y-%m-%d %H:%M:%S")
  File "/usr/lib/python3.8/_strptime.py", line 562, in _strptime_time
    tt = _strptime(data_string, format)[0]
  File "/usr/lib/python3.8/_strptime.py", line 349, in _strptime
    raise ValueError("time data %r does not match format %r" %
ValueError: time data '0000-00-00 00:00:00' does not match format '%Y-%m-%d %H:%M:%S'
[2022-06-22 14:41:08 +0800] [427180] [INFO] Starting gunicorn 20.1.0
[2022-06-22 14:41:08 +0800] [427180] [INFO] Listening at: http://0.0.0.0:8180 (427180)
[2022-06-22 14:41:08 +0800] [427180] [INFO] Using worker: gevent
[2022-06-22 14:41:08 +0800] [427182] [INFO] Booting worker with pid: 427182
[2022-06-22 14:41:08 +0800] [427183] [INFO] Booting worker with pid: 427183
[2022-06-22 14:41:08 +0800] [427184] [INFO] Booting worker with pid: 427184
[2022-06-22 14:41:08 +0800] [427185] [INFO] Booting worker with pid: 427185
[2022-06-22 16:36:34,084] ERROR in app: Exception on /register/url [POST]
Traceback (most recent call last):
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 2077, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1525, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/local/lib/python3.8/dist-packages/flask_cors/extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1523, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/local/lib/python3.8/dist-packages/flask/app.py", line 1509, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "/VAF-System/demo_flask/vvs_service.py", line 312, in register
    add_hit_log(hit_info,hit_db,Hit)
  File "/VAF-System/demo_flask/utils/orm.py", line 104, in add_hit_log
    info.span_time =  get_span(info.call_endtime,info.call_begintime)
  File "/VAF-System/demo_flask/utils/orm.py", line 85, in get_span
    time2 = time.strptime(time2,"%Y-%m-%d %H:%M:%S")
  File "/usr/lib/python3.8/_strptime.py", line 562, in _strptime_time
    tt = _strptime(data_string, format)[0]
  File "/usr/lib/python3.8/_strptime.py", line 349, in _strptime
    raise ValueError("time data %r does not match format %r" %
ValueError: time data '0000-00-00 00:00:00' does not match format '%Y-%m-%d %H:%M:%S'
